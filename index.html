<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>3D Генератор ландшафта</title>
  <link rel="stylesheet" href="style.css">
  <!-- Three.js (CDN) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

</head>
<body>
  <div class="app">
    <header class="header">
      <div class="header-inner">
        <h1 class="title">3D Генератор ландшафта</h1>
        <p class="subtitle">Diamond-Square · Perlin · Эрозия · Редактор</p>
      </div>
      <div class="header-stats">
        <div id="algorithmInfo" class="stat">Алгоритм: —</div>
        <div id="vertexCount" class="stat">Вершины: —</div>
        <div id="polyCount" class="stat">Полигоны: —</div>
      </div>
    </header>

    <main class="main">
      <aside class="sidebar" aria-label="Панель управления">
        <section class="panel">
          <h2 class="panel-title">Генерация</h2>

          <label class="field">
            <span class="label">Seed</span>
            <div class="field-row">
              <input id="seed" type="number" value="12345" class="input-small" />
              <button id="randomSeed" class="btn">Новый seed</button>
            </div>
          </label>

          <label class="field">
            <span class="label">Размер сетки</span>
            <select id="size" class="select">
              <option value="65">65 × 65</option>
              <option value="129">129 × 129</option>
              <option value="257" selected>257 × 257</option>
              <option value="513">513 × 513</option>
            </select>
          </label>

          <label class="field">
            <span class="label">Алгоритм</span>
            <select id="algorithm" class="select">
              <option value="perlin">Perlin</option>
              <option value="diamond">Diamond-Square</option>
              <option value="hybrid" selected>Гибрид</option>
            </select>
          </label>

          <button id="generate" class="btn primary full">Сгенерировать</button>
        </section>

        <section class="panel">
          <h2 class="panel-title">Параметры шума</h2>

          <label class="field">
            <span class="label">Scale</span>
            <input id="scale" type="range" min="10" max="500" value="180" step="1">
            <input id="scaleValue" class="value input-number" type="number"
                  min="10" max="500" step="1" value="180">
          </label>

          <label class="field">
            <span class="label">Octaves</span>
            <input id="octaves" type="range" min="1" max="10" value="4" step="1">
            <input id="octavesValue" class="value input-number" type="number"
                  min="1" max="10" step="1" value="4">
          </label>

          <label class="field">
            <span class="label">Roughness</span>
            <input id="roughness" type="range" min="1" max="100" value="35" step="1">
            <input id="roughnessValue" class="value input-number" type="number"
                  min="1" max="100" step="1" value="35">
          </label>
        </section>


        <section class="panel">
          <h2 class="panel-title">Diamond-Square</h2>

          <label class="field">
            <span class="label">DS Roughness</span>
            <input id="dsRoughness" type="range" min="1" max="100" value="40" step="1">
            <input id="dsRoughnessValue" class="value input-number" type="number"
                  min="1" max="100" step="1" value="40">
          </label>

          <label class="field">
            <span class="label">Hybrid Weight</span>
            <input id="hybridWeight" type="range" min="0" max="100" value="35" step="1">
            <input id="hybridWeightValue" class="value input-number" type="number"
                  min="0" max="100" step="1" value="35">
          </label>
        </section>

        <section class="panel">
          <h2 class="panel-title">Рельеф</h2>

          <label class="field">
            <span class="label">Height scale</span>
            <input id="heightScale" type="range" min="10" max="200" value="35" step="1">
            <input id="heightScaleValue" class="value input-number" type="number"
                  min="10" max="200" step="1" value="35">
          </label>

          <label class="field">
            <span class="label">Erosion iterations</span>
            <input id="erosionIterations" type="range" min="0" max="10000" value="4000" step="100">
            <input id="erosionValue" class="value input-number" type="number"
                  min="0" max="10000" step="100" value="4000">
          </label>

          <label class="field">
            <span class="label">Smoothing</span>
            <input id="smoothing" type="range" min="0" max="100" value="45" step="1">
            <input id="smoothingValue" class="value input-number" type="number"
                  min="0" max="100" step="1" value="45">
          </label>
        </section>


        <section class="panel">
          <h2 class="panel-title">Внешний вид</h2>

          <label class="field">
            <span class="label">Water level</span>
            <input id="waterLevel" type="range" min="0" max="100" value="20" step="1">
            <input id="waterLevelValue" class="value input-number" type="number"
                  min="0" max="100" step="1" value="20">
          </label>

          <label class="field">
            <span class="label">Color intensity</span>
            <input id="colorIntensity" type="range" min="50" max="200" value="110" step="1">
            <input id="colorIntensityValue" class="value input-number" type="number"
                  min="50" max="200" step="1" value="110">
          </label>

        </section>


        <section class="panel">
          <h2 class="panel-title">Инструменты</h2>
          <div class="tools">
            <button id="export" class="btn">Экспорт</button>
            <button id="screenshot" class="btn">Скриншот</button>
            <button id="exportUnityBtn" class="btn-primary">Unity export</button>
            <button id="exportFullUnity">Экспорт в Unity (полный)</button>
          </div>
        </section>

        <section class="panel editor-panel">
          <h2 class="panel-title">Редактор</h2>

          <div class="tool-buttons">
            <button id="toolSmooth" class="btn tool-btn">Сгладить</button>
            <button id="toolRaise" class="btn tool-btn">Поднять</button>
            <button id="toolLower" class="btn tool-btn">Опустить</button>
            <button id="toolReset" class="btn tool-btn">Сброс</button>
          </div>

          <label class="field">
            <span class="label">Brush size</span>
            <input id="brushSize" type="range" min="1" max="100" value="10">
            <div class="value" id="brushSizeValue">10</div>
          </label>

          <label class="field">
            <span class="label">Brush strength</span>
            <input id="brushStrength" type="range" min="1" max="100" value="30">
            <div class="value" id="brushStrengthValue">30%</div>
          </label>

          <div id="currentTool" class="current-tool">Инструмент: выбор</div>
        </section>
      </aside>

      <section class="viewer" aria-label="3D просмотр">
        <div id="threeContainer" class="three-container" role="application" aria-label="Three.js canvas"></div>

        <div id="loading" class="loading" aria-hidden="true">
          <div class="loading-inner">
            <div class="loading-text">Загрузка...</div>
            <div id="loadingProgress" class="loading-progress">0%</div>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div>© Проект генератора ландшафта</div>
      <div class="footer-links">
        <a href="#" id="helpLink">Помощь</a>
      </div>
    </footer>
  </div>

  <!-- Скрипты (локальные) -->
  <script src="perlin.js"></script>
  <script src="diamondSquare.js"></script>
  <script src="erosion.js"></script>
  <script src="textureLoader.js"></script>
  <script src="threeRenderer.js"></script>
  <script src="main.js"></script>
  <script src="terrainEditor.js"></script>
</body>
</html>
