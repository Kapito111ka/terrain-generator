<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Generator terenu 3D</title>
  <link rel="stylesheet" href="style.css">
  <!-- Three.js (CDN) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

</head>
<body>
  <div class="app">
    <header class="header">
      <div class="header-inner">
        <h1 class="title">Procedural 3D Terrain Generator</h1>
        <p class="subtitle">
          Diamond-Square · Perlin Noise · Erosion · Unity Export
        </p>
      <div class="header-stats">
        <div id="algorithmInfo" class="stat">Algorytm: —</div>
        <div id="vertexCount" class="stat">Wierzchołki: —</div>
        <div id="polygonCount" class="stat">Poligony: —</div>
      </div>
    </header>

    <main class="main">
      <aside class="sidebar" aria-label="Panel sterowania">
        <section class="panel collapsible">
        <h2 class="panel-title">Generowanie</h2>
        <div class="panel-content">
          <label class="field">
            <span class="label">Seed</span>
            <div class="field-row">
              <input id="seed" type="number" value="12345" class="input-small" />
              <button id="randomSeed" class="btn">Nowy seed</button>
            </div>
          </label>

          <label class="field">
            <span class="label">Rozmiar siatki</span>
            <select id="size" class="select">
              <option value="65">65 × 65</option>
              <option value="129">129 × 129</option>
              <option value="257" selected>257 × 257</option>
              <option value="513">513 × 513</option>
            </select>
          </label>

          <label class="field">
            <span class="label">Algorytm</span>
            <select id="algorithm" class="select">
              <option value="perlin">Perlin</option>
              <option value="diamond">Diamond-Square</option>
              <option value="hybrid" selected>Hybrydowy</option>
            </select>
          </label>

          <button id="generate" class="btn primary full">Generuj</button>
        </section>

       <section class="panel collapsible">
        <h2 class="panel-title">Parametry szumu(Perlin / Hybrid)</h2>
        <div class="panel-content">
          <label class="field">
            <span class="label">Częstotliwość detalu</span>
            <input id="scale" type="range" min="5" max="100" value="35" step="1">
            <input id="scaleValue" class="value input-number" type="number"
                  min="5" max="100" step="1" value="35">
          </label>

          <label class="field">
            <span class="label">Oktawy</span>
            <input id="octaves" type="range" min="1" max="6" value="4" step="1">
            <input id="octavesValue" class="value input-number" type="number"
                  min="1" max="6" step="1" value="4">
          </label>

          <label class="field">
            <span class="label">Chropowatość (amplituda)</span>
            <input id="roughness" type="range" min="20" max="80" value="45" step="1">
            <input id="roughnessValue" class="value input-number" type="number"
                  min="20" max="80" step="1" value="45">
          </label>
        </section>

       <section class="panel collapsible">
        <h2 class="panel-title">Diamond-Square</h2>
        <div class="panel-content">
          <label class="field">
            <span class="label">Chropowatość DS</span>
            <input id="dsRoughness" type="range" min="10" max="90" value="40" step="1">
            <input id="dsRoughnessValue" class="value input-number" type="number"
                  min="10" max="90" step="1" value="40">
          </label>

          <label class="field">
            <span class="label">Waga hybrydy</span>
            <input id="hybridWeight" type="range" min="0" max="100" value="35" step="1">
            <input id="hybridWeightValue" class="value input-number" type="number"
                  min="0" max="100" step="1" value="35">
          </label>
        </section>

        <section class="panel collapsible">
          <h2 class="panel-title">Ukształtowanie terenu</h2>
          <div class="panel-content">
          <label class="field">
            <span class="label">Skala wysokości</span>
            <input id="heightScale" type="range" min="5" max="60" value="35" step="1">
            <input id="heightScaleValue" class="value input-number" type="number"
                  min="5" max="60" step="1" value="35">
                      </label>

          <label class="field">
            <span class="label">Iteracje erozji</span>
            <input id="erosionIterations" type="range" min="0" max="3000" value="1000" step="50">
            <input id="erosionValue" class="value input-number" type="number"
                  min="0" max="3000" step="50" value="1000">
          </label>

          <label class="field">
            <span class="label">Erozja termalna</span>
            <input type="range"id="thermalErosion"min="0"max="100"step="1"value="30">
            <input type="number"id="thermalErosionValue"class="input-number"min="0"max="100"value="30">
          </label>

          <label class="field">
            <span class="label">Wygładzanie</span>
            <input id="smoothing" type="range" min="0" max="60" value="45" step="1">
            <input id="smoothingValue" class="value input-number" type="number"
                  min="0" max="60" step="1" value="45">
          </label>
        </section>

        <section class="panel collapsible collapsed">
          <h2 class="panel-title">Wygląd</h2>
          <div class="panel-content">
          <label class="field">
            <span class="label">Poziom wody</span>
            <input id="waterLevel" type="range" min="0" max="50" value="20" step="1">
            <input id="waterLevelValue" class="value input-number" type="number"
                  min="0" max="50" step="1" value="20">
          </label>
          <label class="field">
          <span class="label">Woda</span>
          <button id="toggleWater" class="btn full">Wyłącz wodę</button>
          </label>
          <label class="field">
            <span class="label">Intensywność koloru</span>
            <input id="colorIntensity" type="range" min="50" max="150" value="110" step="1">
            <input id="colorIntensityValue" class="value input-number" type="number"
                  min="50" max="150" step="1" value="110">
          </label>

        </section>

        <section class="panel collapsible collapsed">
          <h2 class="panel-title">Narzędzia</h2>
          <div class="panel-content">
          <div class="tools">
            <button id="screenshot" class="btn">Zrzut ekranu</button>
            <button id="exportFullUnity">Eksport do Unity (pełny)</button>
          </div>
        </section>

        <section class="panel collapsible collapsed">
          <h2 class="panel-title">Edytor</h2>

          <div class="panel-content">

            <div class="tool-buttons">
              <button id="toolSmooth" class="btn tool-btn">Wygładź</button>
              <button id="toolRaise" class="btn tool-btn">Podnieś</button>
              <button id="toolLower" class="btn tool-btn">Obniż</button>
              <button id="toolReset" class="btn tool-btn">Reset</button>
              <button id="toggleBrush" class="btn tool-btn">Wyłącz pędzel</button>
              <button id="undoBtn">Cofnij</button>
              <button id="redoBtn">Ponów</button>
            </div>

            <label class="field">
              <span class="label">Rozmiar pędzla</span>
              <input id="brushSize" type="range" min="1" max="100" value="10">
              <div class="value" id="brushSizeValue">10</div>
            </label>

            <label class="field">
              <span class="label">Siła pędzla</span>
              <input id="brushStrength" type="range" min="1" max="100" value="30">
              <div class="value" id="brushStrengthValue">30%</div>
            </label>

            <div id="currentTool" class="current-tool">Narzędzie: wybór</div>

          </div>
        </section>
      </aside>

      <section class="viewer" aria-label="Podgląd 3D">
        <div id="threeContainer" class="three-container" role="application" aria-label="Three.js canvas"></div>

        <div id="loading" class="loading" aria-hidden="true">
          <div class="loading-inner">
            <div class="loading-text">Ładowanie...</div>
            <div id="loadingProgress" class="loading-progress">0%</div>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div>© Projekt generatora terenu</div>
      <div class="footer-links">
        <a href="help.html" id="helpLink">Pomoc</a>
      </div>
    </footer>
  </div>

  <!-- Скрипты (локальные) -->
  <script src="perlin.js"></script>
  <script src="diamondSquare.js"></script>
  <script src="erosion.js"></script>          <!-- HydraulicErosion -->
  <script src="thermalErosion.js"></script>
  <script src="textureLoader.js"></script>
  <script src="threeRenderer.js"></script>
  <script src="main.js"></script>
  <script src="terrainEditor.js"></script>
  <script src="tests.js"></script>
</body>
</html>
