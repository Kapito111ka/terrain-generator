<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ª–∞–Ω–¥—à–∞—Ñ—Ç–∞ - Diamond-Square + Perlin</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>3D –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ª–∞–Ω–¥—à–∞—Ñ—Ç–∞ - Diamond-Square + Perlin</h1>
            <p>–î–≤–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: –æ—Ä–≥–∞–Ω–∏—á–Ω—ã–π Diamond-Square –∏ –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Perlin Noise</p>
        </header>

        <div class="controls-panel">
            <div class="control-section">
                <h3>üé≤ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è</h3>
                <div class="control-group">
                    <label for="seed">–°–∏–¥:</label>
                    <input type="number" id="seed" value="12345">
                    <button id="randomSeed">–ù–æ–≤—ã–π —Å–∏–¥</button>
                </div>
                <div class="control-group">
                    <label for="size">–†–∞–∑–º–µ—Ä:</label>
                    <select id="size">
                        <option value="65">65x65</option>
                        <option value="129">129x129</option>
                        <option value="257" selected>257x257</option>
                        <option value="513">513x513</option>
                    </select>
                </div>
                <div class="control-group">
                    <label for="algorithm">–ê–ª–≥–æ—Ä–∏—Ç–º:</label>
                    <select id="algorithm">
                        <option value="perlin">Perlin Noise</option>
                        <option value="diamond">Diamond-Square</option>
                        <option value="hybrid" selected>–ì–∏–±—Ä–∏–¥–Ω—ã–π</option>
                    </select>
                </div>
                <button id="generate" class="generate-btn">üéØ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ª–∞–Ω–¥—à–∞—Ñ—Ç</button>
            </div>

            <div class="control-section">
                <h3>‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —à—É–º–∞</h3>
                <div class="control-group">
                    <label for="scale">–ú–∞—Å—à—Ç–∞–±:</label>
                    <input type="range" id="scale" min="10" max="500" value="120">
                    <span id="scaleValue">120</span>
                </div>
                <div class="control-group">
                    <label for="octaves">–û–∫—Ç–∞–≤—ã:</label>
                    <input type="range" id="octaves" min="1" max="10" value="4">
                    <span id="octavesValue">4</span>
                </div>
                <div class="control-group">
                    <label for="roughness">–®–µ—Ä–æ—Ö–æ–≤–∞—Ç–æ—Å—Ç—å:</label>
                    <input type="range" id="roughness" min="1" max="100" value="40">
                    <span id="roughnessValue">0.4</span>
                </div>
            </div>

            <div class="control-section">
                <h3>üî∑ Diamond-Square</h3>
                <div class="control-group">
                    <label for="dsRoughness">–®–µ—Ä–æ—Ö–æ–≤–∞—Ç–æ—Å—Ç—å DS:</label>
                    <input type="range" id="dsRoughness" min="1" max="100" value="50">
                    <span id="dsRoughnessValue">0.5</span>
                </div>
                <div class="control-group">
                    <label for="hybridWeight">–°–º–µ—à–∏–≤–∞–Ω–∏–µ:</label>
                    <input type="range" id="hybridWeight" min="0" max="100" value="40">
                    <span id="hybridWeightValue">40%</span>
                </div>
            </div>

            <div class="control-section">
                <h3>üèîÔ∏è –†–µ–ª—å–µ—Ñ</h3>
                <div class="control-group">
                    <label for="heightScale">–í—ã—Å–æ—Ç–∞:</label>
                    <input type="range" id="heightScale" min="10" max="200" value="50">
                    <span id="heightScaleValue">50</span>
                </div>
                <div class="control-group">
                    <label for="erosionIterations">–≠—Ä–æ–∑–∏—è:</label>
                    <input type="range" id="erosionIterations" min="0" max="10000" value="3000">
                    <span id="erosionValue">3000</span>
                </div>
                <div class="control-group">
                    <label for="smoothing">–°–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ:</label>
                    <input type="range" id="smoothing" min="0" max="100" value="30">
                    <span id="smoothingValue">30</span>
                </div>
            </div>

            <div class="control-section">
                <h3>üé® –í–Ω–µ—à–Ω–∏–π –≤–∏–¥</h3>
                <div class="control-group">
                    <label for="waterLevel">–£—Ä–æ–≤–µ–Ω—å –≤–æ–¥—ã:</label>
                    <input type="range" id="waterLevel" min="0" max="100" value="15">
                    <span id="waterLevelValue">15%</span>
                </div>
                <div class="control-group">
                    <label for="colorIntensity">–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å —Ü–≤–µ—Ç–æ–≤:</label>
                    <input type="range" id="colorIntensity" min="50" max="200" value="100">
                    <span id="colorIntensityValue">100%</span>
                </div>
                <div class="view-controls">
                    <label>–†–µ–∂–∏–º:</label>
                    <button id="viewSolid" class="active">–¢–µ–∫—Å—Ç—É—Ä–∞</button>
                    <button id="viewWireframe">–°–µ—Ç–∫–∞</button>
                </div>
            </div>

            <div class="control-section">
                <h3>üíæ –≠–∫—Å–ø–æ—Ä—Ç</h3>
                <button id="export">üì• –≠–∫—Å–ø–æ—Ä—Ç –≤—ã—Å–æ—Ç</button>
                <button id="screenshot">üì∏ –°–Ω–∏–º–æ–∫</button>
            </div>
        </div>

        <div class="loading" id="loading">
            <div class="loading-spinner"></div>
            <div class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            <div class="loading-progress" id="loadingProgress">0%</div>
        </div>

        <div class="visualization">
            <div class="canvas-container">
                <div id="threeContainer"></div>
                <div class="tool-info" id="toolInfo">
                    <div>üîÑ Alt+–õ–ö–ú: –í—Ä–∞—â–∞—Ç—å –∫–∞–º–µ—Ä—É</div>
                    <div>üîç –ö–æ–ª–µ—Å–æ: –ú–∞—Å—à—Ç–∞–±</div>
                    <div>üì± –ü–ö–ú: –ü–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏–µ</div>
                </div>
                <div class="legend">
                    <span>üü¶ –í–æ–¥–∞</span>
                    <span>üü® –ü–µ—Å–æ–∫</span>
                    <span>üü© –¢—Ä–∞–≤–∞</span>
                    <span>üü´ –ó–µ–º–ª—è</span>
                    <span>‚¨ú –°–∫–∞–ª—ã</span>
                    <span>‚ùÑÔ∏è –°–Ω–µ–≥</span>
                </div>
            </div>
            
            <div class="stats">
                <div id="minHeight">–ú–∏–Ω: 0.00</div>
                <div id="maxHeight">–ú–∞–∫—Å: 0.00</div>
                <div id="vertexCount">–í–µ—Ä—à–∏–Ω—ã: 0</div>
                <div id="algorithmInfo">–ê–ª–≥–æ—Ä–∏—Ç–º: –ì–∏–±—Ä–∏–¥–Ω—ã–π</div>
                <div id="generationTime">–í—Ä–µ–º—è: 0—Å</div>
            </div>
        </div>
    </div>

    <script src="perlin.js"></script>
    <script src="diamondSquare.js"></script>
    <script src="erosion.js"></script>
    <script src="threeRenderer.js"></script>
    <script src="main.js"></script>
</body>
</html>